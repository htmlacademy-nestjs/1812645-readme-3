// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  output = "../../../../../node_modules/.prisma/client"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum PublicationStatus {
  PUBLISHED
  DRAFT
}

model TextPost {
  id            Int    @id @default(autoincrement())
  name          String
  announcement  String
  text          String

  Publication Publication?

  @@map("text_posts")
}

model VideoPost {
  id              Int     @id @default(autoincrement())
  name            String
  linkToVideo     String  @map("link_to_video")

  Publication Publication?

  @@map("video_posts")
}

model Publication {
  id                Int               @id @default(autoincrement())
  authorId          String            @map("author_id")
  dateOfCreation    DateTime          @default(now()) @map("date_of_creation")
  dateOfPublication DateTime          @updatedAt  @map("date_of_publication")
  status            PublicationStatus @default(PUBLISHED)
  kindOfPost        String            @map("kind_of_post")
  tags              String[]          @default([])

  videoPost         VideoPost         @relation(fields: [videoPostId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  videoPostId       Int               @unique @map("video_posts_id")

  textPost          TextPost          @relation(fields: [textPostId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  textPostId        Int               @unique @map("text_posts_id")

  @@map("publications")
}
